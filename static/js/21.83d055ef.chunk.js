(this["webpackJsonpbounty-admin-pc"]=this["webpackJsonpbounty-admin-pc"]||[]).push([[21],{465:function(e,t,c){e.exports={box:"check_reject_create_box__3g0O0",form:"check_reject_create_form__bCOQJ",item:"check_reject_create_item__LS2DM",roleList:"check_reject_create_roleList__2UbLI"}},476:function(e,t,c){"use strict";var a=c(2),n=c(1),r=c(0),o=c.n(r),l=c(351),s=c(5),i=c.n(s),d=c(7),u=c(6),f=c(152),b=c.n(f),h=c(345),p=c(328),j=c(364),O={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"},m=c(13),y=function(e,t){return r.createElement(m.a,Object.assign({},e,{ref:t,icon:O}))};y.displayName="FolderOpenOutlined";var x=r.forwardRef(y),v={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"},N=function(e,t){return r.createElement(m.a,Object.assign({},e,{ref:t,icon:v}))};N.displayName="FolderOutlined";var k,w=r.forwardRef(N),C=c(59);function E(e,t){e.forEach((function(e){var c=e.key,a=e.children;!1!==t(c,e)&&E(a||[],t)}))}function _(e){var t=e.treeData,c=e.expandedKeys,a=e.startKey,n=e.endKey,r=[],o=k.None;if(a&&a===n)return[a];if(!a||!n)return[];return E(t,(function(e){if(o===k.End)return!1;if(function(e){return e===a||e===n}(e)){if(r.push(e),o===k.None)o=k.Start;else if(o===k.Start)return o=k.End,!1}else o===k.Start&&r.push(e);return-1!==c.indexOf(e)})),r}function K(e,t){var c=Object(d.a)(t),a=[];return E(e,(function(e,t){var n=c.indexOf(e);return-1!==n&&(a.push(t),c.splice(n,1)),!!c.length})),a}!function(e){e[e.None=0]="None",e[e.Start=1]="Start",e[e.End=2]="End"}(k||(k={}));var g=function(e,t){var c={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(c[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(c[a[n]]=e[a[n]])}return c};function T(e){var t=e.isLeaf,c=e.expanded;return t?r.createElement(j.a,null):c?r.createElement(x,null):r.createElement(w,null)}function I(e){var t=e.treeData,c=e.children;return t||Object(p.c)(c)}var R=function(e,t){var c=e.defaultExpandAll,o=e.defaultExpandParent,l=e.defaultExpandedKeys,s=g(e,["defaultExpandAll","defaultExpandParent","defaultExpandedKeys"]),f=r.useRef(),j=r.useRef(),O=r.createRef();r.useImperativeHandle(t,(function(){return O.current}));var m=r.useState(s.selectedKeys||s.defaultSelectedKeys||[]),y=Object(u.a)(m,2),x=y[0],v=y[1],N=r.useState(function(){var e=Object(p.a)(I(s)).keyEntities;return c?Object.keys(e):o?Object(h.e)(s.expandedKeys||l,e):s.expandedKeys||l}()),k=Object(u.a)(N,2),w=k[0],E=k[1];r.useEffect((function(){"selectedKeys"in s&&v(s.selectedKeys)}),[s.selectedKeys]),r.useEffect((function(){"expandedKeys"in s&&E(s.expandedKeys)}),[s.expandedKeys]);var R=b()((function(e,t){t.isLeaf||e.shiftKey||e.metaKey||e.ctrlKey||O.current.onNodeExpand(e,t)}),200,{leading:!0}),D=r.useContext(C.b),P=D.getPrefixCls,L=D.direction,S=s.prefixCls,A=s.className,H=g(s,["prefixCls","className"]),z=P("tree",S),B=i()("".concat(z,"-directory"),Object(a.a)({},"".concat(z,"-directory-rtl"),"rtl"===L),A);return r.createElement($,Object(n.a)({icon:T,ref:O,blockNode:!0},H,{prefixCls:z,className:B,expandedKeys:w,selectedKeys:x,onSelect:function(e,t){var c,a,r=s.multiple,o=t.node,l=t.nativeEvent,i=o.key,u=void 0===i?"":i,b=I(s),h=Object(n.a)(Object(n.a)({},t),{selected:!0}),p=l.ctrlKey||l.metaKey,O=l.shiftKey;r&&p?(a=e,f.current=u,j.current=a,h.selectedNodes=K(b,a)):r&&O?(a=Array.from(new Set([].concat(Object(d.a)(j.current||[]),Object(d.a)(_({treeData:b,expandedKeys:w,startKey:u,endKey:f.current}))))),h.selectedNodes=K(b,a)):(a=[u],f.current=u,j.current=a,h.selectedNodes=K(b,a)),null===(c=s.onSelect)||void 0===c||c.call(s,a,h),"selectedKeys"in s||v(a)},onClick:function(e,t){var c;"click"===s.expandAction&&R(e,t),null===(c=s.onClick)||void 0===c||c.call(s,e,t)},onDoubleClick:function(e,t){var c;"doubleClick"===s.expandAction&&R(e,t),null===(c=s.onDoubleClick)||void 0===c||c.call(s,e,t)},onExpand:function(e,t){var c;return"expandedKeys"in s||E(e),null===(c=s.onExpand)||void 0===c?void 0:c.call(s,e,t)}}))},D=r.forwardRef(R);D.displayName="DirectoryTree",D.defaultProps={showIcon:!0,expandAction:"click"};var P=D,L=c(27),S=c(350);function A(e){var t,c=e.dropPosition,n=e.dropLevelOffset,r=e.prefixCls,l=e.indent,s=e.direction,i=void 0===s?"ltr":s,d="ltr"===i?"left":"right",u="ltr"===i?"right":"left",f=(t={},Object(a.a)(t,d,-n*l+4),Object(a.a)(t,u,0),t);switch(c){case-1:f.top=-3;break;case 1:f.bottom=-3;break;default:f.bottom=-3,f[d]=l+4}return o.a.createElement("div",{style:f,className:"".concat(r,"-drop-indicator")})}var H=r.forwardRef((function(e,t){var c,o=r.useContext(C.b),s=o.getPrefixCls,d=o.direction,u=o.virtual,f=e.prefixCls,b=e.className,h=e.showIcon,p=e.showLine,j=e.switcherIcon,O=e.blockNode,m=e.children,y=e.checkable,x=e.selectable,v=s("tree",f),N=Object(n.a)(Object(n.a)({},e),{showLine:Boolean(p),dropIndicatorRender:A});return r.createElement(l.b,Object(n.a)({itemHeight:20,ref:t,virtual:u},N,{prefixCls:v,className:i()((c={},Object(a.a)(c,"".concat(v,"-icon-hide"),!h),Object(a.a)(c,"".concat(v,"-block-node"),O),Object(a.a)(c,"".concat(v,"-unselectable"),!x),Object(a.a)(c,"".concat(v,"-rtl"),"rtl"===d),c),b),direction:d,checkable:y?r.createElement("span",{className:"".concat(v,"-checkbox-inner")}):y,selectable:x,switcherIcon:function(e){return Object(S.a)(v,j,p,e)}}),m)}));H.TreeNode=l.a,H.DirectoryTree=P,H.defaultProps={checkable:!1,selectable:!0,showIcon:!1,motion:Object(n.a)(Object(n.a)({},L.a),{motionAppear:!1}),blockNode:!1};var $=H;t.a=$},480:function(e,t,c){"use strict";c.r(t);var a=c(30),n=c(23),r=c(22),o=c(312),l=c(318),s=c(317),i=c(363),d=c(476),u=c(53),f=c(63),b=c(0),h=c(465),p=c.n(h),j=c(4);t.default=function(){var e=o.a.TextArea,t=Object(r.d)(),c=Object(r.h)().query,h=Object(f.a)(c.id),O=Object(n.a)(h,1)[0],m=Object(f.a)(""),y=Object(n.a)(m,2),x=y[0],v=y[1],N=Object(f.a)(null),k=Object(n.a)(N,2),w=k[0],C=k[1],E=Object(f.a)([]),_=Object(n.a)(E,2),K=_[0],g=_[1],T=Object(f.a)([]),I=Object(n.a)(T,2),R=I[0],D=I[1],P=Object(f.a)([]),L=Object(n.a)(P,2),S=L[0],A=L[1],H=Object(f.a)([]),$=Object(n.a)(H,2),z=$[0],B=$[1],U=Object(f.a)({phraseType:"PRODUCT",phraseName:"",relatedCodes:[]}),V=Object(n.a)(U,2),M=V[0],F=V[1],J=Object(f.a)({phraseName:""}),q=Object(n.a)(J,2),G=q[0],Q=q[1],W=Object(r.c)(),X=Object(n.a)(W,1)[0],Y=Object(r.f)(),Z=Object(n.a)(Y,1)[0],ee=Object(r.a)(),te=Object(n.a)(ee,1)[0];function ce(e,t){F((function(c){c[e]=t}))}function ae(e){var t=[];return e.forEach((function(e){var c={};c.key=e.itemCode,c.title=e.itemName,c.children=e.rewardItems&&e.rewardItems.length?ae(e.rewardItems):[],t.push(c)})),t}function ne(){X("".concat(window.$api.check_reject_list,"/").concat(O)).then((function(e){var t=e.rejectPhrase;v(t.phraseCode),B(t.relatedCodes),F((function(e){e.phraseType=t.phraseType,e.phraseName=t.phraseName,e.relatedCodes=t.relatedCodes}))})).catch((function(e){return e}))}function re(e){Q((function(t){e.forEach((function(e){t[e]=""}))}))}function oe(){te("".concat(window.$api.check_reject_list,"/").concat(O)).then((function(){l.a.success({title:"\u5220\u9664\u6210\u529f",content:"\u77ed\u8bed\u8bb0\u5f55\u5df2\u5220\u9664",okText:"\u786e\u5b9a",maskClosable:!0,afterClose:function(){t(window.$route.check_reject_list)}})})).catch((function(){}))}return Object(b.useEffect)((function(){X("".concat(window.$api.check_reject_list,"/rewardItems/PRODUCT")).then((function(e){var t=ae(e.rewardItems);g(t)})).catch((function(e){return e})),X("".concat(window.$api.check_reject_list,"/rewardItems/BRAND")).then((function(e){var t=ae(e.rewardItems);D(t)})).catch((function(e){return e}))}),[]),Object(b.useEffect)((function(){O&&ne()}),[O]),Object(b.useEffect)((function(){ce("relatedCodes",z)}),[S,z]),Object(b.useEffect)((function(){A([]),K.length&&R.length&&(w&&clearTimeout(w),"PRODUCT"===M.phraseType&&C(setTimeout((function(){A(K)}))),"BRAND"===M.phraseType&&C(setTimeout((function(){A(R)}))))}),[M.phraseType,K,R]),Object(j.jsx)("div",{className:p.a.box,children:Object(j.jsxs)(s.a,Object(a.a)(Object(a.a)({className:p.a.form},{labelCol:{span:6},wrapperCol:{span:18}}),{},{children:[Object(j.jsx)(s.a.Item,{className:p.a.item,label:"\u77ed\u8bed\u7f16\u53f7\uff1a",children:O?x:"(\u7cfb\u7edf\u81ea\u52a8\u751f\u6210)"}),Object(j.jsx)(s.a.Item,{className:p.a.item,label:"\u7c7b\u578b\uff1a",children:Object(j.jsxs)(i.a.Group,{value:M.phraseType,onChange:function(e){return t=e.target.value,B([]),void ce("phraseType",t);var t},children:[Object(j.jsx)(i.a,{value:"PRODUCT",children:"\u5546\u54c1"}),Object(j.jsx)(i.a,{value:"BRAND",children:"\u54c1\u724c"})]})}),Object(j.jsxs)(s.a.Item,{className:p.a.item,label:"\u77ed\u8bed\u5185\u5bb9\uff1a",required:!0,children:[Object(j.jsx)(e,{className:"scroll-y",placeholder:"\u8bf7\u8f93\u5165",autoSize:{minRows:3,maxRows:5},maxLength:200,value:M.phraseName,onChange:function(e){ce("phraseName",e.target.value)},onFocus:function(){re(["phraseName"])}}),!!G.phraseName&&Object(j.jsx)("span",{className:"color-red",children:G.phraseName})]}),Object(j.jsx)(s.a.Item,{className:p.a.item,label:"\u62d2\u7edd\u539f\u56e0\uff1a",children:Object(j.jsx)("div",{className:"".concat(p.a.roleList," scroll-y"),children:!!S.length&&Object(j.jsx)("div",{children:Object(j.jsx)(d.a,{className:"ant-tree-hide-switcher",checkable:!0,selectable:!1,defaultExpandAll:!0,checkedKeys:z,treeData:S,onCheck:function(e){B(e)}})})})}),Object(j.jsxs)(s.a.Item,Object(a.a)(Object(a.a)({},{wrapperCol:{offset:6,span:18}}),{},{className:p.a.item,children:[Object(j.jsx)(u.a,{type:"primary",onClick:function(){if(M.phraseName){var e=O?Object(a.a)(Object(a.a)({},M),{},{id:O}):M,c=O?"\u4fdd\u5b58\u6210\u529f\uff01":"\u63d0\u4ea4\u6210\u529f\uff01",n=O?"\u77ed\u8bed\u8bb0\u5f55\u5df2\u4fdd\u5b58":"\u65b0\u5efa\u77ed\u8bed\u8bb0\u5f55\u6210\u529f";Z("".concat(window.$api.check_reject_list),e).then((function(){l.a.success({title:c,content:n,okText:"\u786e\u5b9a",maskClosable:!0,afterClose:function(){t(window.$route.check_reject_list)}})})).catch((function(){}))}else Q((function(e){M.phraseName||(e.phraseName="\u8bf7\u8f93\u5165\u77ed\u8bed\u5185\u5bb9\uff01")}))},children:O?"\u4fdd\u5b58":"\u63d0\u4ea4"}),Object(j.jsx)(u.a,{className:"ml-10",onClick:function(){O?ne():(B([]),F({phraseType:"PRODUCT",phraseName:"",relatedCodes:[]})),re(["phraseName"])},children:"\u91cd\u7f6e"}),O&&Object(j.jsx)(u.a,{className:"ml-10",onClick:function(){l.a.confirm({title:"\u5220\u9664",content:"\u786e\u8ba4\u5220\u9664\u672c\u6761\u77ed\u8bed\u8bb0\u5f55\uff1f",onOk:oe})},children:"\u5220\u9664"})]}))]}))})}}}]);