(this["webpackJsonpbounty-admin-pc"]=this["webpackJsonpbounty-admin-pc"]||[]).push([[17],{323:function(e,t,n){"use strict";var a=n(30),i=n(315),c=n(78),r=n(22),s=n(4);function o(e){var t=e.children,n=e.promise,o=e.pendingDelay,l=e.hasBorder,d=e.hasPendingMask,u=Object(r.g)({promise:n,pendingDelay:o}),b=u.isPending,j=u.isDelayOver,m=u.data,f=u.error,O=u.isEmptyForData,p=u.promised,h=u.recentErrors,g={borderTop:l?"1px solid #f0f0f0":"none"};if(!1===p)return null;if(b){var x=!f&&!1===O&&!1===h;return Object(s.jsxs)("div",{style:Object(a.a)({position:"relative"},g),children:[j&&!x&&Object(s.jsx)("div",{style:{textAlign:"center",paddingTop:16},children:Object(s.jsx)(i.a,{})}),x&&t(m,b),x&&d&&Object(s.jsx)("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:0,zIndex:2,backgroundColor:"#ffffff",opacity:.5}})]})}return Object(s.jsxs)("div",{style:g,children:[f&&Object(s.jsx)(c.a,{image:c.a.PRESENTED_IMAGE_SIMPLE,description:f.message||"\u83b7\u53d6\u670d\u52a1\u5668\u6570\u636e\u51fa\u9519"}),!f&&O&&Object(s.jsx)(c.a,{image:c.a.PRESENTED_IMAGE_SIMPLE,description:"\u6682\u65e0\u6570\u636e"}),!f&&!1===O&&t(m,b)]})}o.defaultProps={promise:null,pendingDelay:200,hasBorder:!0,hasPendingMask:!0},t.a=o},332:function(e,t,n){"use strict";var a=n(339),i=n.n(a),c=n(4);t.a=function(e){var t=e.children,n=e.className;return Object(c.jsx)("div",{className:"".concat(i.a.header," ").concat(n||""),children:t})}},339:function(e,t,n){e.exports={header:"style_header__Q4NWp"}},501:function(e,t,n){"use strict";n.r(t);var a=n(30),i=n(23),c=n(0),r=n(63),s=n(323),o=n(22),l=n(91),d=n(317),u=n(491),b=n(494),j=n(332),m=n(53),f=n(4),O=window.$utility.formatterIntegerForInputNumber,p=window.$utility.parserIntegerForInputNumber;var h=function(e){var t=e.data,n=e.signData,a=e.isPending,r=e.updateSignData,s=e.doFetchInfo,h=Object(c.useState)(!1),g=Object(i.a)(h,2),x=g[0],y=g[1],I=Object(c.useState)(!1),v=Object(i.a)(I,2),w=v[0],N=v[1],E=Object(o.e)(),D=Object(i.a)(E,1)[0];return Object(c.useEffect)((function(){!1===a&&r((function(e){e.data=t}))}),[a]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(j.a,{className:"mb-10",children:"\u57fa\u672c\u4fe1\u606f"}),Object(f.jsx)("div",{style:{width:460},children:Object(f.jsxs)(d.a,{component:!1,labelCol:{span:6},children:[Object(f.jsx)(d.a.Item,{className:"form-item-mb-10",label:"\u4e8b\u4ef6\u7f16\u53f7",children:n.eventCode}),Object(f.jsx)(d.a.Item,{className:"form-item-mb-10",label:"\u4e8b\u4ef6\u540d\u79f0",children:n.eventName}),Object(f.jsx)(d.a.Item,{className:"form-item-mb-10",label:"\u7d2f\u8ba1\u7b7e\u5230\u4eba\u6b21",children:n.totalCount}),Object(f.jsx)(d.a.Item,{className:"form-item-mb-0",label:"\u7d2f\u8ba1\u53d1\u653e\u91d1\u5e01",children:n.totalAmount})]})}),Object(f.jsx)(j.a,{className:"mb-10 mt-14",children:"\u4e8b\u4ef6\u89c4\u5219"}),Object(f.jsx)("div",{style:{width:460},children:Object(f.jsxs)(d.a,{component:!1,labelCol:{span:6},children:[Object(f.jsx)(d.a.Item,{className:"form-item-mb-10",label:"\u89e6\u53d1\u6761\u4ef6",children:"\u6bcf\u65e5\u7b7e\u5230"}),Object(f.jsx)(d.a.Item,{className:"form-item-mb-10",label:"\u5956\u52b1\u7c7b\u578b",children:"\u8fde\u7eed\u7b7e\u5230"}),Object(f.jsx)(d.a.Item,{className:"form-item-mb-10",label:"\u5956\u52b1\u89c4\u5219",children:Object(f.jsxs)(u.a,{dataSource:n.signInRuleVOs,pagination:!1,size:"small",bordered:!0,children:[Object(f.jsx)(u.a.Column,{title:"\u8fde\u7eed\u7b7e\u5230",align:"center",dataIndex:"type",render:function(e,t,n){return n>=6?"\u8fde\u7eed\u7b7e\u5230".concat(e,"\u5929\u4ee5\u4e0a"):"".concat(e)}}),Object(f.jsx)(u.a.Column,{title:"\u5956\u52b1\u91d1\u5e01",dataIndex:"amount",render:function(e,t){return Object(f.jsx)(b.a,{value:e,formatter:O,parser:function(t){return p(t,e,!1)},onChange:function(e){!function(e,t){r((function(n){var a,i=Object(l.a)(n.data.signInRuleVOs);try{for(i.s();!(a=i.n()).done;){var c=a.value;if(c.type===t){c.amount=e;break}}}catch(r){i.e(r)}finally{i.f()}}))}(e,t.type)},keyboard:!1,style:{color:"#1890ff",width:"100%"}})}})]})}),Object(f.jsxs)(d.a.Item,{className:"form-item-mb-0",label:" ",colon:!1,children:[Object(f.jsx)(m.a,{type:"primary",loading:w,onClick:function(){N(!0);var e={eventCode:n.eventCode,ruleData:[]};n.signInRuleVOs.forEach((function(t){e.ruleData.push({type:t.type,amount:t.amount})})),D(window.$api.operation_sign_panel,e).then((function(){window.$utility.message.success("\u4fdd\u5b58\u6210\u529f")})).catch((function(e){window.$utility.message.error(window.$utility.generateRequestErrorMsg(e))})).then((function(){N(!1)}))},children:"\u4fdd\u5b58"}),Object(f.jsx)(m.a,{className:"ml-10",loading:x,onClick:function(){y(!0),s()},children:"\u91cd\u7f6e"})]})]})})]})};t.default=function(){var e=Object(o.c)(),t=Object(i.a)(e,1)[0],n=Object(c.useState)(null),l=Object(i.a)(n,2),d=l[0],u=l[1],b=Object(r.a)({data:null}),j=Object(i.a)(b,2),m=j[0],O=j[1];function p(){u(t("".concat(window.$api.operation_sign_panel,"/SJ00000001")).then((function(e){return Object(a.a)(Object(a.a)({},e.signInDetailVO),{},{signInRuleVOs:e.signInDetailVO.signInRuleVOs.map((function(e){return Object(a.a)(Object(a.a)({},e),{},{key:e.type})}))})})).catch((function(){throw new Error})))}return Object(o.b)((function(){p()})),Object(f.jsx)(s.a,{promise:d,hasBorder:!1,hasPendingMask:!1,children:function(e,t){return Object(f.jsx)(h,{data:e,signData:m.data||e,isPending:t,updateSignData:O,doFetchInfo:p})}})}}}]);